alter session set nls_date_format = 'DD/MM/YYYY HH24:MI';
DROP TABLE CLASIFICACION;
DROP TABLE PARTIDAS;
DROP TABLE TORNEOS;
DROP TABLE ZONAS;
DROP TABLE PERSONAL;
DROP TABLE JUEGOS;
DROP TABLE ENTRENADORES;
DROP TABLE JUGADORES;
DROP TABLE EQUIPOS;
CREATE TABLE EQUIPOS(
ID_EQUIPO VARCHAR2(10) PRIMARY KEY,
DNI_ENTRENADOR VARCHAR2(9),
Nombre_Equipo VARCHAR2(20) UNIQUE,
Nacionalidad VARCHAR2(20),
Num_Jugadores NUMBER(1),
CONSTRAINT CK_DNI_ENTRENADOR CHECK (LENGTH(DNI_ENTRENADOR) = 9 AND
SUBSTR(DNI_ENTRENADOR,-1) BETWEEN 'A' AND 'Z'),
CONSTRAINT CK_NUM_JUGADORES CHECK (Num_Jugadores >=5 or Num_Jugadores <=8)
);
CREATE TABLE JUGADORES(
DNI_JUGADORES VARCHAR2(9) PRIMARY KEY,

TELEFONO VARCHAR2(9),
ROLL CHAR(1),
SUPERVISOR VARCHAR2(20),
ALIAS VARCHAR2(10),
ID_EQUIPO VARCHAR2(10) REFERENCES EQUIPOS,
CONSTRAINT CK_JUGADORES CHECK (ROLL IN ('T','J','M','A','S')),
CONSTRAINT CK_ALIAS CHECK (SUBSTR(ALIAS,1,1) = '"' AND
SUBSTR(ALIAS,-1) = '"' )
);

CREATE TABLE ENTRENADORES(
DNI_ENTRENADOR VARCHAR2(20) PRIMARY KEY,
ALIAS VARCHAR2(10),
TELEFONO VARCHAR2(9)
);
CREATE TABLE JUEGOS(
NOMBRE_JUEGO VARCHAR2(30)PRIMARY KEY,
DESARROLLADOR VARCHAR2(40),
TIPO VARCHAR2(10),
DESCRIPCION VARCHAR2(200),
CONSTRAINT CK_DESCRIPCION CHECK (SUBSTR(DESCRIPCION,1,1) BETWEEN 'A' AND 'Z'
AND
SUBSTR(DESCRIPCION,-1) = '.' AND LENGTH(DESCRIPCION)>=20)
);
CREATE TABLE PERSONAL(
COD_PERSONAL VARCHAR2(5) PRIMARY KEY,
FUNCION VARCHAR2(20),
MATERIAL VARCHAR2(30),
CONSTRAINT CK_FUNCION_PERONAL CHECK (FUNCION IN
('LIMPIEZA','AUDIOVISUALES','SONIDO','CAMARA','VEDEDORES', 'COMIDA','SEGURIDAD'))
);
CREATE TABLE ZONAS(
COD_ZONA NUMBER(4) PRIMARY KEY,
COD_PERSONAL REFERENCES PERSONAL,
NOMBRE_ZONA VARCHAR2(20),
DIRECCION VARCHAR2(40),
PAIS VARCHAR2(20),
CONSTRAINT CK_ZONAS CHECK (SUBSTR(DIRECCION,1,2) = 'C/' OR
SUBSTR(DIRECCION,1,3) = 'AV/' OR
SUBSTR(DIRECCION,1,4) = 'PLZ/' OR
SUBSTR(DIRECCION,1,4) = 'GTA/' )
);

CREATE TABLE TORNEOS(
ID_TORNEO VARCHAR2(20) PRIMARY KEY,

COD_ZONA NUMBER(4) REFERENCES ZONAS,
NOMBRE_JUEGO VARCHAR2(30) REFERENCES JUEGOS,
NOMBRE_TORNEO VARCHAR2(30),
HORARIO date,
CLASIFICACION NUMBER(2) NOT NULL,
DURACION number,
CONSTRAINT CK_CLASIFICACION CHECK (CLASIFICACION >0),
CONSTRAINT CK_DURACION CHECK (DURACION > 15 )
);

CREATE TABLE PARTIDAS(
FECHA_HORA DATE PRIMARY KEY ,
ID_TORNEO VARCHAR2(20) REFERENCES TORNEOS,
PUNTUACION NUMBER (3),
NUM_RONDAS NUMBER (1),
CONSTRAINT CK_NUM_RONDAS CHECK (NUM_RONDAS <5)
);
CREATE TABLE CLASIFICACION(
ID_EQUIPO VARCHAR2(10) REFERENCES EQUIPOS,
ID_TORNEO VARCHAR2(20) REFERENCES TORNEOS,
FECHA_HORA DATE REFERENCES PARTIDAS,
POSICION NUMBER(2),
PREMIO NUMBER(7,2),
CONSTRAINT PK_CLASIFICACION PRIMARY KEY(ID_EQUIPO,ID_TORNEO)
);
INSERT INTO EQUIPOS VALUES (
'1001', '44444444D', 'Fnatic', 'Española', 5);
INSERT INTO EQUIPOS VALUES (
'1002', '55555555E', 'G2 Esports', 'Española', 7);
INSERT INTO EQUIPOS VALUES (
'1003', '66666666F', 'MAD Lions', 'Española', 8);
INSERT INTO EQUIPOS VALUES (
'1004', '77777777G', 'Origen', 'Ecuatoriana', 6);
INSERT INTO EQUIPOS VALUES (
'1005', '88888888H', 'Movistar Riders', 'Española', 6);
INSERT INTO EQUIPOS VALUES (
'1006', '99999999I', 'Team Liquid', 'Francesa', 7);
-----------------------------------------------------------------------------------
INSERT INTO JUGADORES VALUES(
'32445656D','645782345','T','PRINCIPAL','"SURGICAL"','1001');
INSERT INTO JUGADORES VALUES(
'34566784T','637893456','J','PRINCIPAL','"BENIJU"','1002');
INSERT INTO JUGADORES VALUES(
'24567894G','657845786','M','PRINCIPAL','"MALCAIDE"','1002');
INSERT INTO JUGADORES VALUES(

'34654792P','658923590','A','PRINCIPAL','"WITHZACK"','1001');
INSERT INTO JUGADORES VALUES(
'76584956D','614837946','S','SECUNDARIO','"ALVARO"','1003');
INSERT INTO JUGADORES VALUES(
'45366785H','636931679','T','SECUNDARIO','"MINIJU"','1003');
-----------------------------------------------------------------------------------
INSERT INTO ENTRENADORES VALUES (
'44444444D', 'Fanático', '644444444');
INSERT INTO ENTRENADORES VALUES (
'55555555E', 'GG', '655555555');
INSERT INTO ENTRENADORES VALUES (
'66666666F', 'León', '666666666');
INSERT INTO ENTRENADORES VALUES (
'77777777G', 'Génesis', '677777777');
INSERT INTO ENTRENADORES VALUES (
'88888888H', 'Movis', '688888888');
INSERT INTO ENTRENADORES VALUES (
'99999999I', 'Líquido', '688888888');
-----------------------------------------------------------------------------------
INSERT INTO JUEGOS VALUES(
'Valorant','Riot Games','FPS','Shooter competitivo.');
INSERT INTO JUEGOS VALUES(
'LeagueOfLegends','Riot Games','MOBA','Juego estratégico competitivo.');
INSERT INTO JUEGOS VALUES(
'Clash Royale','Supercell','Cartas','Batalla de arena estratégica.');
INSERT INTO JUEGOS VALUES(
'Dragon Ball Figtherz','ARC System Works','Lucha','Lucha 2D con variedad de personajes.');
-----------------------------------------------------------------------------------
INSERT INTO PERSONAL VALUES(
'N1234','LIMPIEZA','MOCHO');
INSERT INTO PERSONAL VALUES(
'N4323','AUDIOVISUALES','CAMERA');
INSERT INTO PERSONAL VALUES(
'G5654','SEGURIDAD','PORRA');
INSERT INTO PERSONAL VALUES(
'H7543','SONIDO','MICROFONO');
INSERT INTO PERSONAL VALUES(
'H6896','SONIDO','CASCOS');
-----------------------------------------------------------------------------------
INSERT INTO ZONAS VALUES(
1,'N1234','ARRIBA','C/ORENSE','ESPAÑA');
INSERT INTO ZONAS VALUES(

2,'H6896','IZQUIERDA','C/CERCANA','PORTUGAL');
INSERT INTO ZONAS VALUES(
5,'H7543','DERECHA','AV/LEBLEU','FRANCIA');
INSERT INTO ZONAS VALUES(
3,'G5654','ABAJO','C/MILAN','ITALIA');
INSERT INTO ZONAS VALUES(
4,'H6896','CENTRO','C/AVIADORZORITA','ESPAÑA');
-----------------------------------------------------------------------------------
INSERT INTO TORNEOS VALUES(
'C12',2,'Clash Royale','SERIE1','18/12/2019 10:00',3,20);
INSERT INTO TORNEOS VALUES(
'C28',2,'LeagueOfLegends','SERIE2','18/02/2022 10:50',3,20);
INSERT INTO TORNEOS VALUES(
'C35',2,'Valorant','SERIE9','20/03/2022 19:50',3,20);
INSERT INTO TORNEOS VALUES(
'C92',2,'Clash Royale','SERIE5','27/07/2022 20:00',3,18);
-----------------------------------------------------------------------------------
INSERT INTO PARTIDAS VALUES(
'18/12/2022 10:00','C12',80,3);
INSERT INTO PARTIDAS VALUES(
'10/02/2022 10:00','C28',90,3);
INSERT INTO PARTIDAS VALUES(
'28/03/2022 10:00','C35',70,3);
INSERT INTO PARTIDAS VALUES(
'18/06/2022 10:00','C92',60,3);
INSERT INTO PARTIDAS VALUES(
'18/05/2022 10:00','C12',40,3);
-----------------------------------------------------------------------------------
INSERT INTO CLASIFICACION VALUES(
'1001','C12','10/02/2022 10:00',2,10000);
INSERT INTO CLASIFICACION VALUES(
'1002','C28','28/03/2022 10:00',2,90000);
INSERT INTO CLASIFICACION VALUES(
'1003','C35','18/06/2022 10:00',2,60000);
INSERT INTO CLASIFICACION VALUES(
'1004','C92','10/02/2022 10:00',2,30000);
INSERT INTO CLASIFICACION VALUES(
'1004','C35','18/05/2022 10:00',2,20000);
INSERT INTO CLASIFICACION VALUES(
'1006','C92','28/03/2022 10:00',2,10000);
------------------------------------------------------------------------

